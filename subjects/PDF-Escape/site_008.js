/*
Copyright 2007 - 2016 Red Software.
All Rights Reserved.

This file and its contents may only be used to the extent, in the manner and 
for the purposes permitted by PDFescape's terms of use. Without limiting the 
foregoing, this file and its contents may NOT be copied, modified, used to 
create a derivative work of, reverse engineered, reverse assembled or 
otherwise used in attempt to discover any source code, linked to or otherwise 
used outside of PDFescape, sold, assigned, sublicensed, or distributed without 
the prior written consent of Red Software.
*/

var pdfescapeAlert,pdfescapeAlertHide,pdfescapeAllowUnload,pdfescapeCheckSession,pdfescapeDocShare,pdfescapeOnReady,pdfescapeOpenNewControlInit,pdfescapeOpenUploadControlInit,pdfescapeOpenUrl,pdfescapeOpenUrlControlInit,pdfescapePricingSetup,pdfescapeShowMessage,pdfescapeSendAnalyticsEvent,pdfescapeSendAnalyticsEventAndLocation,pdfescapeValidatorsCheck,pdfescapeValidatorsSetup;var pDefinitionShow,pDefinitionHide;(function(){function cB(p,n){p.appendChild(n);}function cC(n,t){cB(n,document.createTextNode(t));}function cD(v){return document.createElement(v);}function cE(v){return document.getElementById(v);}function cF(v){return document.getElementsByTagName(v);}function cG(n){cB((cF("body")[0]||document.body),n);}function cH(b,l,t,w,h){var s=b.style;s.position="absolute";s.left=l+"px";s.top=t+"px";s.width=w+"px";s.height=h+"px";}function cI(b,v){b.style.display=(v?"":"none");}function cJ(b,v){b.style.visibility=(v?"visible":"hidden");}function cK(b,v){if(document.getElementsByTagName){var ls=cF('label');for(var i=0;i<ls.length;i++){if(ls[i].htmlFor===b.id){cJ(ls[i],v);}}}}function cL(b,v){cI(b,v);cJ(b,v);}function cM(b){cJ(b,0);b.style.position="absolute";}function cN(b,v){var bp=new RegExp("\\b"+v+"\\b");if(!bp.test(b.className)){b.className+=" "+v;}}function cO(b,v){var bp=new RegExp("\\b"+v+"\\b");b.className=cY(b.className.replace(bp,""));}function cP(b,t,f){if(b.addEventListener){b.addEventListener(t,f,false);return true;}else if(b.attachEvent){b.attachEvent("on"+t,f);return true;}return false;}function cQ(d){var bq=false;var br=function(){if(bq){return;}bq=true;d();};if(document.readyState==="complete"){br();}else if(document.addEventListener){document.addEventListener("DOMContentLoaded",br,false);window.addEventListener("load",br,false);}else{document.attachEvent("onreadystatechange",br);window.attachEvent("onload",br);var bs=function(){try{document.documentElement.doScroll("left");}catch(e){return setTimeout(function(){bs(br);},50);}br();};bs(br);}}function cR(a,v){for(var i=0;i<a.length;i++){if(a[i]===v){return true;}}return false;}function cS(a,d){if(a){for(var i=0;i<a.length;i++){d(a[i]);}}}function cT(o,d){if(o){for(var p in o){if(o.hasOwnProperty(p)){d(o[p]);}}}}function cU(){var bu;if(window.XMLHttpRequest){bu=new XMLHttpRequest();if(bu.overrideMimeType){bu.overrideMimeType("text/plain");}}else if(window.ActiveXObject){try{bu=new ActiveXObject("Msxml2.XMLHTTP");}catch(cv){try{bu=new ActiveXObject("Microsoft.XMLHTTP");}catch(cw){}}}return bu;}function cV(s){try{return encodeURIComponent(s);}catch(e){return escape(s).replace(/\+/g,"%2B");}}function cW(s,j){s=s.toLowerCase();j=j.toLowerCase();return s.indexOf(j,s.length-j.length)!==-1;}function cX(i,k){var bv;var bw;if(i>=1073741824){bv=i/1073741824;bw=" GB";}else if(i>=1048576){bv=i/1048576;bw=" MB";}else if(i>=1024){bv=i/1024;bw=" KB";}else{bv=i;bw=" B";}if(k&&(i>=1024)&&(bv<100)){return(Math.ceil(bv*10)/10)+bw;}return Math.ceil(bv)+bw;}function cY(s){if(s){return s.replace(/^\s+|\s+$/gm,"");}return"";}function cZ(){var r=[];cS(window.Page_Validators,function(v){var id=(v&&v.controltovalidate)||"";if(v&&id){if(r[id]){if(r[id][1]){r[id][1]=v.isvalid;}}else{var c=cE(id);r[id]=[c,v.isvalid]}}});return r;}var bx=false;function da(u,x,y,z,A){var by=cE("pdfe_alert");var bz=cE("pdfe_alert_overlay");var bA=function(){var bQ=0,bR=0;if(window.innerWidth){bQ=window.innerWidth;bR=window.innerHeight;}else if(document.documentElement&&document.documentElement.clientWidth){bQ=document.documentElement.clientWidth;bR=document.documentElement.clientHeight;}else if(document.body&&document.body.clientWidth){bQ=document.body.clientWidth;bR=document.body.clientHeight;}if(z){bQ=z;}if(A){bR=A;}bQ=Math.max(bQ,360);bR=Math.max(bR,360);return[bQ,bR];};var bB=function(){var a=bA();cH(by,Math.floor((a[0]-x)/2),Math.floor((a[1]-y)/2),x,y);cH(bz,0,0,a[0],a[1]);};if(!bx){bx=true;cP(window,"resize",bB);}by.innerHTML="";if(u){cB(by,u);bB();cL(by,1);cL(bz,1);}else{cL(by,0);cL(bz,0);}}pdfescapeAlert=da;pdfescapeAlertHide=function(){da();};var bC=[];function db(){for(var i=0;i<bC.length;i++){var o=bC[i];try{if(o.abort&&(o.readyState!=4)){o.abort();}if(o.src){o.src="/blank/";}}catch(e){}}}var bD=true;function dc(B){if(B){bD=false;window.onbeforeunload=function(C){C=(C||window.event);if(!B()&&!bD){var r="If you leave this page without saving, your current work will be lost.";C.returnValue=r;return r;}};}else{bD=true;try{window.onbeforeunload=null;}catch(cx){}}}var bE=false;function dd(D){if(bE){return;}bE=true;try{db();dc();window.location.href=D;}catch(e){bE=false;}}function de(id){dd("/open/?"+cY(id));}function df(F,H,J){db();var bF=cD("div");var bG=cD("div");bG.style.backgroundColor="#ffffff";bG.style.border="1px solid #000000";bG.style.overflow="auto";bG.style.padding="5px";bG.style.textAlign="left";cH(bG,10,10,338,90);cC(bG,F);cB(bF,bG);var bH=cD("span");cC(bH,"OK");cH(bH,H?55:145,130,60,18);bH.onclick=function(){if(J){dd("/open/");}else{da();}};cB(bF,bH);if(H){var bI=cD("span");cC(bI,"Upgrade to Premium!");cH(bI,140,130,155,18);bI.onclick=function(){dd("/account/upgrade/");};cB(bF,bI);}da(bF,370,170);}function dg(F,H){df(F,H,true);}function dh(F,K,L){var bF=cD("div");var bJ=cD("div");bJ.style.overflow="auto";cH(bJ,10,10,305,60);cC(bJ,F);cB(bF,bJ);if(K){var bH=cD("span");cC(bH,K);cH(bH,125,80,55,18);bH.onclick=function(){if(!L||(false===L())){da();}};cB(bF,bH);}da(bF,325,130);}var bK=0;var bL=0;function di(N,O){var bu=cU();bu.onreadystatechange=function(){if(bu.readyState==4){if(bu.status==200){try{bK++;var bM=bu.responseText;var bN=bM.split(";");if(bN.length==7){switch(bN[0]){case"0":if(bK>40){dg("PDFescape is taking too long to provide an informational status.");break;}case"1":if(bK>400){dg("File is taking too long to be loaded in PDFescape.");break;}if(bL&&(parseInt(bN[4],10)>bL)){dg("File is too large to be loaded in PDFescape.");break;}if(O){O(parseInt(bN[3],10),parseInt(bN[4],10),parseInt(bN[5],10));setTimeout(function(){di(N,O);},500+(bK*50));}else{dg("Unknown error loading file. Loading should be complete.");}break;case"2":de(bN[2]);break;case"9":if(bN[6]){dg(bN[6],"1"==bN[1]);}else{dg("Unknown error loading file.");}break;default:dg("Invalid loading status.");break;}}else{dg("Invalid open status: "+bM);}}catch(ex){dg("Client-side error: "+ex.message);}}else{dg("There was a server error opening PDF, please try again later");}}};bu.open("GET","PdfescapeOpenStatus.axd?"+N,true);bu.send(null);}function dj(P,F){cI(P,1);P.innerHTML="";var bO=F.split("\n");for(var i=0;i<bO.length;i++){if(i>0){cB(P,cD("br"));}cC(P,bO[i]);}}function dk(Q,R){if(window.pdfescapeOpenId){R(window.pdfescapeOpenId);return;}if(!Q){dg("Authentication failed. Your session has expired.");return;}var bu=cU();bu.onreadystatechange=function(){if(bu.readyState==4){if(bu.status==200){R(bu.responseText);}else{dg("Authentication failed. PDFescape Open Identifier could not be obtained.");}}};bu.open("GET","PdfescapeOpenIdr.axd",true);bu.send(null);}var bP;pDefinitionShow=function(e,t){var tx;var bQ;var bR;var bS=0;var bT=0;switch(t){case"ultimate":tx="<b>PDFescape Ultimate</b> members can publish documents to PDFescape. Once a file is uploaded, advanced permissions for the file can be setup (including the ability to make the PDF form submit responses to an email address).";break;case"unreg":tx="<b>Unregistered</b> users can use PDFescape free of charge, however they can <b>not</b> later log back into PDFescape and work with previously opened files. Files which you do not save to your local computer will be inaccessible after you log out. Registering is free and recommended for most users.";break;default:tx="";}if(tx.length>0){if(window.event){e=window.event;}if(!bP){bP=cD("div");bP.className="body-definition";bP.style.position="absolute";cG(bP);}if(window.innerWidth){bQ=window.innerWidth;bR=window.innerHeight;}else if(document.documentElement.clientWidth){bQ=document.documentElement.clientWidth;bR=document.documentElement.clientHeight;}else if(document.body.clientWidth){bQ=document.body.clientWidth;bR=document.body.clientHeight;}bS=(document.documentElement.scrollTop||document.body.scrollTop||0);bT=(document.documentElement.scrollLeft||document.body.scrollLeft||0);bP.innerHTML=tx;if(((e.pageX||e.clientX||0)+250)>bQ){bP.style.left=((e.pageX||(e.clientX+bT)||0)-210)+"px";}else{bP.style.left=((e.pageX||(e.clientX+bT)||0)+5)+"px";}bP.style.top=((e.pageY||(e.clientY+bS)||0)+5)+"px";cL(bP,1);}};pDefinitionHide=function(){if(bP){cL(bP,0);bP.innerHTML="";}};pdfescapeAllowUnload=dc;pdfescapeCheckSession=function(S){var bu=cU();bu.onreadystatechange=function(){if(bu.readyState==4){if(bu.status==200){if(S){S(bu.responseText);}}else{df("There was a server error checking session. You may be logged out.");}}};bu.open("GET","/account/check_session/",true);bu.send(null);};pdfescapeDocShare=function(T,U,S){dh("Updating...");var bu=cU();bu.onreadystatechange=function(){if(bu.readyState==4){if(bu.status==200){if(S){S();}}else{df("There was a server error updating the sharing status.");}}};bu.open("GET","/open/share/?id="+T+"&enable="+(U?"1":"0"),true);bu.send(null);};pdfescapeOnReady=cQ;pdfescapeOpenNewControlInit=function(Q,V){var bU=false;var bV=cE(V);if(!bV){return;}var bW=cE(V+"_new");var bX=cE(V+"_form");var bY=cE(V+"_input_pc");var bZ=cE(V+"_input_ps");var P=cE(V+"_status");bY.innerHTML="";for(var i=1;i<=25;i++){var ca=cD("option");cC(ca,i);ca.value=i;if(i==1){ca.selected=true;}cB(bY,ca);}function dl(F){cM(bW);if(!F){F="PDF file is being processed.";}dj(P,F);}bX.onsubmit=function(){if((bY.value.length==0)||(bZ.value.length==0)){return false;}if(!bU){bU=true;dl("Authorizing new document.");dk(Q,function(N){var bu=cU();bu.onreadystatechange=function(){if(bu.readyState==4){if(bu.status==200){de(bu.responseText);}else{di(N);}}};bu.open("POST","PdfescapeOpenNew.axd?"+N,true);bu.setRequestHeader("Content-type","application/x-www-form-urlencoded");bu.send("PdfescapeNewCount="+cV(bY.value)+"&PdfescapeNewSize="+cV(bZ.value));dl("PDF file is being created.");setTimeout(dl,200);});}return false;};cI(bW,1);};pdfescapeOpenUploadControlInit=function(Q,V,W,X,Y){var cb=false;var cc=false;var cd=false;var bV=cE(V);if(!bV){return;}var ce=cE(V+"_drop");var cf=cE(V+"_info");var cg=cE(V+"_file");var bX=cE(V+"_form");var ch=cE(V+"_input");var P=cE(V+"_status");var ci=cE(V+"_target");bC.push(ci);bL=X+1048576;function dm(s){if(W){if(typeof W==="string"){return cW(s,W);}for(var i=0;i<W.length;i++){if(cW(s,W[i])){return true;}}return false;}return true;}var cj=0;function dl(Z,ba,bb){cI(cf,0);cM(ce);cM(cg);if(!(Z&&ba&&bb)){dj(P,"PDF file is being loaded.");}else if(Z<ba){var ck=(new Date()).getTime();if(ck>cj){cj=ck+200;var s=Math.floor((ba*bb/Z)-bb);dj(P,"Uploading...\nApproximately "+s+" second"+((s==1)?"":"s")+" remaining");}}else{dj(P,"PDF file is being processed.");}}function dn(bc){if(bc.length==1){var f=bc[0];if(dm(f.name||f.fileName||"")){var cl=(f.size||f.fileSize||0);if(cl<=X){dl();dk(Q,function(N){var cm=new Date();var cn=new FormData();cn.append("PdfescapeUplFile",f);var bu=new XMLHttpRequest();bu.open("POST","PdfescapeOpenUpl.axd?"+N,true);bu.onreadystatechange=function(){if(bu.readyState==4){if(bu.status==200){de(bu.responseText);}else{di(N,dl);}}};if("upload"in bu){bu.upload.onprogress=function(bd){if(bd.lengthComputable&&bd.loaded&&bd.total){dl(bd.loaded,bd.total,Math.ceil(((new Date()).getTime()-cm)/1000));}};}else{setTimeout(function(){di(N,dl);},200);}bu.send(cn);bC.push(bu);});return true;}else{var H=(cl<=Y);var F="This upload is "+cX(cl,true)+". ";if(H){F+="Only Premium members can open files larger than "+cX(X)+" (up to "+cX(Y)+" and 500 pages).";}else{F+="Please open a document less than "+cX(X)+".";}df(F,H);}}else{df("Please upload a PDF file.");}}else{df("Please upload one file at a time.");}return false;}if(!!window.FormData){ce.ondragover=function(C){C.preventDefault();return false;};var co=0;ce.ondragenter=function(C){if(C.stopPropagation){C.stopPropagation();}co++;ce.style.borderColor="#000000";return false;};ce.ondragleave=function(C){if(C.stopPropagation){C.stopPropagation();}co--;if(co<=0){ce.style.borderColor="#c0c0c0";}return false;};ce.ondrop=function(C){C.preventDefault();if(cd){return false;}if(C.dataTransfer&&C.dataTransfer.files){cd=dn(C.dataTransfer.files);}return false;};cI(cf,0);cI(ce,1);}bX.onsubmit=function(){if(cd){return false;}if(ch.files){cd=dn(ch.files);return false;}if(ch.value.length==0){return false;}if(!dm(ch.value)){df("Please upload a PDF file.");return false;}if(!cb){cb=true;dl();dk(Q,function(N){dc();bX.action="PdfescapeOpenUpl.axd?"+N;cc=true;bX.submit();setTimeout(function(){di(N,dl);},200);});return false;}if(!cc){return false;}cd=true;return true;};ch.onchange=function(){if(!cd&&ch.files&&window.FormData){cd=dn(ch.files);}};cI(cg,1);};pdfescapeOpenUrl=function(Q,be){var bU=false;if(!bU){bU=true;dk(Q,function(N){var bu=cU();bu.onreadystatechange=function(){if(bu.readyState==4){if(bu.status==200){de(bu.responseText);}else{di(N);}}};bu.open("POST","PdfescapeOpenUrl.axd?"+N,true);bu.setRequestHeader("Content-type","application/x-www-form-urlencoded");bu.send("PdfescapeUrlFile="+cV(be));});return false;}};pdfescapeOpenUrlControlInit=function(Q,V){var bV=cE(V);if(!bV){return;}var cp=cE(V+"_url");var bX=cE(V+"_form");var ch=cE(V+"_input");var P=cE(V+"_status");function dl(F){cM(cp);if(!F){F="PDF file is being processed.";}dj(P,F);}bX.onsubmit=function(){if(ch.value.length==0){return false;}dl("PDF file is being loaded.");pdfescapeOpenUrl(Q,ch.value);setTimeout(dl,200);return false;};cI(cp,1);};pdfescapePricingSetup=function(bf,bg,bh,bi,bj,bk){cQ(function(){var cq=cE(bf);var cr=cE(bg);var cs=cE(bh);var ct=cE(bi);function dp(){try{if(cq&&cr&&cs){if(bk&&(bk>1)){cs.value="$"+(bj[cq.value][cr.value]["pricingraw"]*bk).toFixed(2);}else{cs.value=bj[cq.value][cr.value]["pricing"];}ct.value=bj[cq.value][cr.value]["pricingpermonth"];}}catch(cy){}}cP(cq,"change",dp);cP(cq,"keyup",dp);cP(cr,"change",dp);cP(cr,"keyup",dp);dp();});};pdfescapeSendAnalyticsEvent=function(bl,bm,bn){try{window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;window.ga("create","UA-7186015-1","auto");window.ga("send","event",bl,bm,bn||window.location.search);if(window._gaq){window._gaq.push(["_trackEvent",bl,bm,bn||window.location.search]);}}catch(cz){}};pdfescapeSendAnalyticsEventAndLocation=function(bl,bm,D){try{if(window.ga){window.ga("create","UA-7186015-1","auto");window.ga("send","event",bl,bm,{"eventLabel":window.location.search,"hitCallback":function(){window.location=D;}});}if(window._gaq){pdfescapeSendAnalyticsEvent(bl,bm);window._gaq.push(function(){window.setTimeout(function(){window.location=D;},250);});}window.setTimeout(function(){window.location=D;},1000);}catch(cA){window.location=D;}};pdfescapeValidatorsCheck=function(){var cu=cZ();cT(cu,function(a){if(a[0]){if(a[1]){cO(a[0],"invalid");}else{cN(a[0],"invalid");}}});};pdfescapeValidatorsSetup=function(bo){cQ(function(){var cu=cZ();cT(cu,function(a){var b=a[0];if(b){cP(b,"change",pdfescapeValidatorsCheck);if(bo){cP(b,"focus",function(){cK(b,0);});cP(b,"blur",function(){cK(b,!b.value);});if(b.value){cK(b,0);}}}});});};pdfescapeShowMessage=dh;}());